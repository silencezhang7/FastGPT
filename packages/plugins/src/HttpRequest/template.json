{
  "author": "silencezhang",
  "version": "4811",
  "name": "HTTP请求",
  "avatar": "core/workflow/template/HTTP",
  "intro": "可做http请求，如果HTTP插件返回数据乱码，可以尝试此插件",
  "showStatus": true,
  "weight": 10,

  "isTool": true,
  "templateType": "tools",

  "workflow": {
    "nodes": [
      {
        "nodeId": "pluginInput",
        "name": "workflow:template.plugin_start",
        "intro": "workflow:intro_plugin_input",
        "avatar": "core/workflow/template/workflowStart",
        "flowNodeType": "pluginInput",
        "showStatus": false,
        "position": {
          "x": 180.42263486889482,
          "y": -54.38631827243448
        },
        "version": "481",
        "inputs": [
          {
            "renderTypeList": [
              "input",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "requestUrl",
            "label": "requestUrl",
            "description": "请求地址",
            "defaultValue": "",
            "list": [
              {
                "label": "UTF-8",
                "value": "UTF-8"
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": true,
            "toolDescription": "请求地址"
          },
          {
            "renderTypeList": [
              "JSONEditor",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "body",
            "label": "body",
            "description": "请求体",
            "defaultValue": "{}",
            "list": [
              {
                "label": "",
                "value": ""
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": false
          },
          {
            "renderTypeList": [
              "JSONEditor",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "headers",
            "label": "headers",
            "description": "请求头",
            "defaultValue": "{}",
            "list": [
              {
                "label": "",
                "value": ""
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": false
          },
          {
            "renderTypeList": [
              "select",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "encoding",
            "label": "encoding",
            "description": "响应编码",
            "defaultValue": "",
            "list": [
              {
                "label": "GBK",
                "value": "GBK"
              },
              {
                "label": "UTF-8",
                "value": "UTF-8"
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": false
          },
          {
            "renderTypeList": [
              "select",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "requestMethod",
            "label": "requestMethod",
            "description": "请求方式",
            "defaultValue": "",
            "list": [
              {
                "label": "POST",
                "value": "POST"
              },
              {
                "label": "GET",
                "value": "GET"
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": true
          },
          {
            "renderTypeList": [
              "JSONEditor",
              "reference"
            ],
            "selectedTypeIndex": 0,
            "valueType": "string",
            "canEdit": true,
            "key": "parameter",
            "label": "parameter",
            "description": "参数",
            "defaultValue": "{}",
            "list": [
              {
                "label": "",
                "value": ""
              }
            ],
            "maxFiles": 5,
            "canSelectFile": true,
            "canSelectImg": true,
            "required": false
          }
        ],
        "outputs": [
          {
            "id": "corpid",
            "valueType": "string",
            "key": "requestUrl",
            "label": "requestUrl",
            "type": "hidden"
          },
          {
            "id": "corpsecret",
            "valueType": "string",
            "key": "body",
            "label": "body",
            "type": "hidden"
          },
          {
            "id": "header",
            "valueType": "string",
            "key": "headers",
            "label": "headers",
            "type": "hidden"
          },
          {
            "id": "encoding",
            "valueType": "string",
            "key": "encoding",
            "label": "encoding",
            "type": "hidden"
          },
          {
            "id": "requestMethod",
            "valueType": "string",
            "key": "requestMethod",
            "label": "requestMethod",
            "type": "hidden"
          },
          {
            "id": "parameters",
            "valueType": "string",
            "key": "parameter",
            "label": "parameter",
            "type": "hidden"
          }
        ]
      },
      {
        "nodeId": "pluginOutput",
        "name": "common:core.module.template.self_output",
        "intro": "workflow:intro_custom_plugin_output",
        "avatar": "core/workflow/template/pluginOutput",
        "flowNodeType": "pluginOutput",
        "showStatus": false,
        "position": {
          "x": 2155.4114278698053,
          "y": -119.31004403230747
        },
        "version": "481",
        "inputs": [
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "原始响应",
            "label": "原始响应",
            "isToolOutput": true,
            "description": "原始响应",
            "required": true,
            "value": [
              "j8mpn77X9n7O",
              "httpRawResponse"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "string",
            "canEdit": true,
            "key": "响应码",
            "label": "响应码",
            "isToolOutput": true,
            "description": "响应码",
            "required": true,
            "value": [
              "j8mpn77X9n7O",
              "qh7JOHPtGZfh"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "string",
            "canEdit": true,
            "key": "响应信息",
            "label": "响应信息",
            "isToolOutput": true,
            "description": "响应信息",
            "required": true,
            "value": [
              "j8mpn77X9n7O",
              "hUkb7L9GcMLz"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "string",
            "canEdit": true,
            "key": "响应数据",
            "label": "响应数据",
            "isToolOutput": true,
            "description": "响应数据",
            "required": true,
            "value": [
              "j8mpn77X9n7O",
              "oYhtTdzTItDe"
            ]
          }
        ],
        "outputs": []
      },
      {
        "nodeId": "pluginConfig",
        "name": "common:core.module.template.system_config",
        "intro": "",
        "avatar": "core/workflow/template/systemConfig",
        "flowNodeType": "pluginConfig",
        "position": {
          "x": -538.945593526411,
          "y": -33.78525320427528
        },
        "version": "4811",
        "inputs": [],
        "outputs": []
      },
      {
        "nodeId": "j8mpn77X9n7O",
        "name": "HTTP 请求",
        "intro": "可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）",
        "avatar": "core/workflow/template/httpRequest",
        "flowNodeType": "httpRequest468",
        "showStatus": true,
        "position": {
          "x": 1261.586905857731,
          "y": -477.00776317339967
        },
        "version": "481",
        "inputs": [
          {
            "key": "system_addInputParam",
            "renderTypeList": [
              "addInputParam"
            ],
            "valueType": "dynamic",
            "label": "",
            "required": false,
            "description": "common:core.module.input.description.HTTP Dynamic Input",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpMethod",
            "renderTypeList": [
              "custom"
            ],
            "valueType": "string",
            "label": "",
            "value": "POST",
            "required": true,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpTimeout",
            "renderTypeList": [
              "custom"
            ],
            "valueType": "number",
            "label": "",
            "value": 30,
            "min": 5,
            "max": 600,
            "required": true,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpReqUrl",
            "renderTypeList": [
              "hidden"
            ],
            "valueType": "string",
            "label": "",
            "description": "common:core.module.input.description.Http Request Url",
            "placeholder": "https://api.ai.com/getInventory",
            "required": false,
            "value": "HttpRequest",
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpHeader",
            "renderTypeList": [
              "custom"
            ],
            "valueType": "any",
            "value": [],
            "label": "",
            "description": "common:core.module.input.description.Http Request Header",
            "placeholder": "common:core.module.input.description.Http Request Header",
            "required": false,
            "valueDesc": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpParams",
            "renderTypeList": [
              "hidden"
            ],
            "valueType": "any",
            "value": [
              {
                "key": "requestUrl",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.requestUrl-H$}}"
              },
              {
                "key": "body",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.body-H$}}"
              },
              {
                "key": "params",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.params-H$}}"
              },
              {
                "key": "encoding",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.encoding-H$}}"
              },
              {
                "key": "headers",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.headers-H$}}"
              }
            ],
            "label": "",
            "required": false,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpJsonBody",
            "renderTypeList": [
              "hidden"
            ],
            "valueType": "any",
            "value": "{\n\"requestUrl\":\"{{$j8mpn77X9n7O.requestUrl-H$}}\",\n\"requestMethod\":\"{{$j8mpn77X9n7O.requestMethod-H$}}\",\n\"parameter\":{{$j8mpn77X9n7O.parameter-H$}},\n\"headers\":{{$j8mpn77X9n7O.headers-H$}},\n\"body\":{{$j8mpn77X9n7O.body-H$}},\n\"encoding\":\"{{$j8mpn77X9n7O.encoding-H$}}\"\n}",
            "label": "",
            "required": false,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpFormBody",
            "renderTypeList": [
              "hidden"
            ],
            "valueType": "any",
            "value": [
              {
                "key": "sourceDataEncoding",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.sourceDataEncoding-H$}}"
              },
              {
                "key": "content",
                "type": "string",
                "value": "{{$j8mpn77X9n7O.content-H$}}"
              }
            ],
            "label": "",
            "required": false,
            "valueDesc": "",
            "description": "",
            "debugLabel": "",
            "toolDescription": ""
          },
          {
            "key": "system_httpContentType",
            "renderTypeList": [
              "hidden"
            ],
            "valueType": "string",
            "value": "json",
            "label": "",
            "required": false
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "requestUrl-H",
            "label": "requestUrl-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "corpid"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "body-H",
            "label": "body-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "corpsecret"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "headers-H",
            "label": "headers-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "header"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "encoding-H",
            "label": "encoding-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "encoding"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "string",
            "canEdit": true,
            "key": "requestMethod-H",
            "label": "requestMethod-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "requestMethod"
            ]
          },
          {
            "renderTypeList": [
              "reference"
            ],
            "valueType": "any",
            "canEdit": true,
            "key": "parameter-H",
            "label": "parameter-H",
            "customInputConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": true
            },
            "required": true,
            "value": [
              "pluginInput",
              "parameters"
            ]
          }
        ],
        "outputs": [
          {
            "id": "error",
            "key": "error",
            "label": "workflow:request_error",
            "description": "HTTP请求错误信息，成功时返回空",
            "valueType": "object",
            "type": "static"
          },
          {
            "id": "httpRawResponse",
            "key": "httpRawResponse",
            "required": true,
            "label": "workflow:raw_response",
            "description": "HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。",
            "valueType": "any",
            "type": "static"
          },
          {
            "id": "system_addOutputParam",
            "key": "system_addOutputParam",
            "type": "dynamic",
            "valueType": "dynamic",
            "label": "输出字段提取",
            "customFieldConfig": {
              "selectValueTypeList": [
                "string",
                "number",
                "boolean",
                "object",
                "arrayString",
                "arrayNumber",
                "arrayBoolean",
                "arrayObject",
                "arrayAny",
                "any",
                "chatHistory",
                "datasetQuote",
                "dynamic",
                "selectApp",
                "selectDataset"
              ],
              "showDescription": false,
              "showDefaultValue": false
            },
            "description": "可以通过 JSONPath 语法来提取响应值中的指定字段",
            "valueDesc": ""
          },
          {
            "id": "qh7JOHPtGZfh",
            "valueType": "string",
            "type": "dynamic",
            "key": "code",
            "label": "code"
          },
          {
            "id": "hUkb7L9GcMLz",
            "valueType": "string",
            "type": "dynamic",
            "key": "msg",
            "label": "msg"
          },
          {
            "id": "oYhtTdzTItDe",
            "valueType": "any",
            "type": "dynamic",
            "key": "data",
            "label": "data"
          }
        ]
      }
    ],
    "edges": [
      {
        "source": "pluginInput",
        "target": "j8mpn77X9n7O",
        "sourceHandle": "pluginInput-source-right",
        "targetHandle": "j8mpn77X9n7O-target-left"
      },
      {
        "source": "j8mpn77X9n7O",
        "target": "pluginOutput",
        "sourceHandle": "j8mpn77X9n7O-source-right",
        "targetHandle": "pluginOutput-target-left"
      }
    ],
    "chatConfig": {
      "welcomeText": "",
      "variables": [],
      "questionGuide": false,
      "ttsConfig": {
        "type": "web"
      },
      "whisperConfig": {
        "open": false,
        "autoSend": false,
        "autoTTSResponse": false
      },
      "chatInputGuide": {
        "open": false,
        "textList": [],
        "customUrl": ""
      },
      "instruction": "可以针对userid发送企业微信消息",
      "_id": "6750294cde584d5ec9eeab96",
      "autoExecute": {
        "open": false,
        "defaultPrompt": ""
      }
    }
  }
}
